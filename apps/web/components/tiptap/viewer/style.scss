@reference "tailwindcss";

.simple-viewer-wrapper {
  @apply w-full max-w-full px-4 py-6 sm:py-10;
  background: radial-gradient(circle at 20% 0%, rgba(255, 182, 219, 0.22), transparent 58%);

  .dark & {
    background: radial-gradient(circle at 20% 0%, rgba(255, 182, 219, 0.08), transparent 60%);
  }

  .simple-viewer-content {
    @apply w-full max-w-4xl mx-auto px-2 sm:px-0;

    .tiptap {
      --viewer-surface: #ffffff;
      --viewer-surface-dark: rgba(15, 23, 42, 0.92);
      --viewer-border: rgba(190, 24, 93, 0.12);
      --viewer-shadow: rgba(255, 0, 119, 0.12);
      --viewer-muted: #475467;
      --viewer-muted-dark: #e2e8f0;
      --viewer-accent-strong: #9e0250;
      --viewer-accent: #b6025d;
      --viewer-accent-soft: #c2185b;
      --viewer-link: #9e0250;
      --viewer-link-hover: #7d013d;
      --viewer-link-underline: rgba(158, 2, 80, 0.4);
      --viewer-link-focus: rgba(158, 2, 80, 0.5);
      --viewer-highlight: rgba(255, 228, 244, 0.85);
      --viewer-highlight-dark: rgba(219, 39, 119, 0.35);
      --viewer-inline-bg: rgba(255, 255, 255, 0.9);
      --viewer-inline-bg-dark: rgba(15, 15, 23, 0.65);

      @apply relative outline-none p-6 sm:p-8 border rounded-[32px] transition-all duration-300;
      background: var(--viewer-surface);
      border-color: var(--viewer-border);
      box-shadow: 0 25px 60px var(--viewer-shadow);
      color: #0f172a;

      .dark & {
        background: var(--viewer-surface-dark);
        border-color: rgba(251, 207, 232, 0.25);
        box-shadow: 0 30px 70px rgba(5, 5, 15, 0.55);
        color: #f8fafc;
      }

      &.pink-theme {
        --viewer-surface: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 236, 247, 0.94));
        --viewer-surface-dark: linear-gradient(135deg, rgba(26, 9, 23, 0.94), rgba(56, 16, 46, 0.9));
        --viewer-border: rgba(182, 2, 93, 0.2);
        --viewer-shadow: rgba(255, 0, 119, 0.2);
        --viewer-inline-bg: rgba(255, 255, 255, 0.92);
        --viewer-inline-bg-dark: rgba(20, 7, 18, 0.7);
        --viewer-highlight: rgba(255, 224, 241, 0.9);
        --viewer-highlight-dark: rgba(219, 39, 119, 0.45);
        --tt-inline-code-bg-color: var(--viewer-inline-bg);
        --tt-inline-code-text-color: #8f0444;
        --tt-inline-code-border-color: rgba(182, 2, 93, 0.25);
        --tt-codeblock-bg: rgba(255, 255, 255, 0.95);
        --tt-codeblock-text: #1f2937;
        --tt-codeblock-border: rgba(182, 2, 93, 0.25);
        --blockquote-bg-color: var(--viewer-accent);
        --link-text-color: var(--viewer-link);

        .dark & {
          --tt-inline-code-bg-color: var(--viewer-inline-bg-dark);
          --tt-inline-code-text-color: #ffd9ec;
          --tt-inline-code-border-color: rgba(251, 207, 232, 0.3);
          --tt-codeblock-bg: rgba(10, 10, 22, 0.85);
          --tt-codeblock-text: #f3f4f6;
          --tt-codeblock-border: rgba(251, 207, 232, 0.25);
          --blockquote-bg-color: #fbcfe8;
          --link-text-color: #ffd9ec;
        }
      }

      /* Typography */
      p {
        @apply mb-5 text-base leading-8 font-normal text-slate-900;
      }

      @media (min-width: 640px) {
        p {
          font-size: 1.125rem;
          line-height: calc(1.75 / 1.125);
        }
      }

      h1 {
        @apply text-4xl font-bold mt-8 mb-6 leading-tight tracking-tight;
        color: var(--viewer-accent-strong);

        .dark & {
          color: #ffd9ec;
        }
      }

      h2 {
        @apply text-3xl font-semibold mt-7 mb-4 leading-snug;
        color: var(--viewer-accent);
        
        .dark & {
          color: #ffc3e0;
        }
      }

      h3 {
        @apply text-2xl font-semibold mt-6 mb-3 leading-snug;
        color: var(--viewer-accent-soft);
        
        .dark & {
          color: #ffcee7;
        }
      }

      h4 {
        @apply text-xl font-semibold mt-5 mb-2;
        color: var(--viewer-accent-soft);
        
        .dark & {
          color: #ffe1f0;
        }
      }

      ul, ol {
        @apply my-4 pl-6 text-base sm:text-lg leading-7 text-slate-900 dark:text-slate-100;
        
        li {
          @apply mb-2;
        }
      }

      blockquote {
        @apply my-8 rounded-2xl border border-pink-500/10 bg-white/85 dark:bg-slate-900/70 px-6 py-5 text-lg leading-relaxed dark:text-slate-100;
        box-shadow: inset 0 0 0 1px rgba(255, 0, 119, 0.05);
        color: #1e293b;

        p {
          @apply dark:text-slate-100;
          color: #1e293b;
        }
      }

      code {
        @apply font-mono text-sm px-2 py-1 rounded-md border;
        background-color: var(--viewer-inline-bg);
        border-color: var(--tt-inline-code-border-color, rgba(182, 2, 93, 0.2));
        color: var(--tt-inline-code-text-color, var(--viewer-accent-strong));

        .dark & {
          background-color: var(--viewer-inline-bg-dark);
        }
      }

      pre {
        @apply my-6 overflow-x-auto p-4 rounded-2xl border text-sm leading-relaxed;
        background: var(--tt-codeblock-bg, rgba(255, 255, 255, 0.95));
        border-color: var(--tt-codeblock-border, rgba(182, 2, 93, 0.2));
        color: var(--tt-codeblock-text, #1f2937);
        
        code {
          @apply bg-transparent border-0 p-0 text-inherit;
        }

        .dark & {
          background: var(--tt-codeblock-bg, rgba(10, 10, 22, 0.85));
        }
      }

      a {
        @apply underline decoration-1 font-semibold transition-colors duration-200;
        color: var(--link-text-color, var(--viewer-link));
        text-decoration-color: var(--viewer-link-underline);
        text-underline-offset: 0.2em;

        &:hover {
          text-decoration-thickness: 2px;
          color: var(--viewer-link-hover);
        }

        &:focus-visible {
          outline: 2px solid var(--viewer-link-focus);
          outline-offset: 3px;
          border-radius: 0.25rem;
        }
        
        .dark & {
          color: #ffd9ec;
          text-decoration-color: rgba(255, 217, 236, 0.7);
          
          &:hover {
            color: #ffe5f1;
          }
          
          &:focus-visible {
            outline-color: rgba(255, 217, 236, 0.6);
          }
        }
      }

      strong, b {
        @apply font-semibold text-slate-900 dark:text-slate-100;
      }

      em, i {
        @apply text-slate-800 dark:text-slate-50;
      }

      img, video, audio {
        @apply max-w-full h-auto rounded-2xl my-6 shadow-xl border border-white/50 dark:border-slate-800/70;
      }

      /* Task list styling */
      ul[data-type="taskList"] {
        @apply list-none pl-0;

        li {
          @apply flex items-start gap-3 py-1 text-slate-900 dark:text-slate-100;

          > label {
            @apply flex-none select-none;
            
            input[type="checkbox"] {
              accent-color: var(--viewer-accent);
              
              .dark & {
                accent-color: #fbcfe8;
              }
            }
          }

          > div {
            @apply flex-1;
          }
        }
      }

      /* Horizontal rule */
      hr {
        @apply my-10 border-0 border-t-2;
        border-color: rgba(182, 2, 93, 0.35);
        
        .dark & {
          border-color: rgba(251, 207, 232, 0.4);
        }
      }

      /* Highlight marks */
      mark {
        @apply px-1 py-0.5 rounded-sm font-semibold dark:text-pink-50;
        background-color: var(--viewer-highlight);
        color: #0f172a;
        
        .dark & {
          background-color: var(--viewer-highlight-dark);
        }
      }
    }
  }
}
