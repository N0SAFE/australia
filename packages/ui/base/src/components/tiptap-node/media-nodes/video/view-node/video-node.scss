.tiptap.ProseMirror {
  // Video node wrapper - prevent overflow
  .video-node-wrapper {
    width: 100%;
    max-width: 100%;
    overflow: hidden;
    margin: 0;
    padding: 0.5rem 0;
  }

  // Video node container
  .video-node {
    position: relative;
    display: inline-block;
    max-width: 100%;
    overflow: hidden;

    // Processing overlay container - centered on video
    .video-processing-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      pointer-events: none;
      max-width: 90%;
      width: auto;
      min-width: 280px;
    }

    // Progress bar for video processing - Beautiful and Discreet
    .video-processing-progress {
      position: relative;
      height: 0.125rem; // Thin and discreet (2px)
      background: linear-gradient(
        90deg,
        rgba(59, 130, 246, 0.8) 0%,
        rgba(96, 165, 250, 0.9) 50%,
        rgba(147, 197, 253, 1) 100%
      );
      transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 0 0 var(--tt-radius-xs, 0.25rem) var(--tt-radius-xs, 0.25rem);
      box-shadow: 0 1px 3px rgba(59, 130, 246, 0.3);
      
      // Shimmer animation for visual appeal
      .video-processing-shimmer {
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent 0%,
          rgba(255, 255, 255, 0.6) 50%,
          transparent 100%
        );
        animation: shimmer 2s infinite;
      }
      
      // Completed state styling
      &.video-processing-progress--completed {
        background: linear-gradient(
          90deg,
          rgba(34, 197, 94, 0.8) 0%,
          rgba(74, 222, 128, 0.9) 50%,
          rgba(134, 239, 172, 1) 100%
        );
        box-shadow: 0 1px 3px rgba(34, 197, 94, 0.4);
        height: 0.1875rem; // Slightly thicker for completion (3px)
      }
      
      // Failed state styling
      &.video-processing-progress--failed {
        background: linear-gradient(
          90deg,
          rgba(239, 68, 68, 0.8) 0%,
          rgba(248, 113, 113, 0.9) 50%,
          rgba(252, 165, 165, 1) 100%
        );
        box-shadow: 0 1px 3px rgba(239, 68, 68, 0.4);
        height: 0.1875rem; // Slightly thicker for error (3px)
      }
    }

    // Processing badge - Shows status and percentage
    .video-processing-badge {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.25rem 0.5rem;
      background: rgba(0, 0, 0, 0.75);
      backdrop-filter: blur(8px);
      border-radius: var(--tt-radius-sm, 0.375rem);
      color: white;
      font-size: 0.75rem;
      font-weight: 500;
      line-height: 1;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      animation: fadeInBadge 0.3s ease-out;
      
      .video-processing-spinner {
        display: inline-block;
        width: 0.75rem;
        height: 0.75rem;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top-color: #60a5fa;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }
      
      .video-processing-check {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 0.875rem;
        height: 0.875rem;
        font-size: 0.75rem;
        color: #4ade80;
        font-weight: 700;
      }
      
      .video-processing-error {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 0.875rem;
        height: 0.875rem;
        font-size: 0.75rem;
        color: #f87171;
        font-weight: 700;
      }
      
      .video-processing-text {
        white-space: nowrap;
        opacity: 0.95;
      }
      
      // Completed state styling
      &.video-processing-badge--completed {
        background: rgba(34, 197, 94, 0.9);
        box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
        animation: pulseSuccess 0.6s ease-out;
      }
      
      // Failed state styling
      &.video-processing-badge--failed {
        background: rgba(239, 68, 68, 0.9);
        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        animation: pulseError 0.6s ease-out;
      }
    }

    // Keyframe animations
    @keyframes shimmer {
      0% {
        left: -100%;
      }
      100% {
        left: 100%;
      }
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes fadeInBadge {
      from {
        opacity: 0;
        transform: translateY(-0.25rem);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulseSuccess {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }

    @keyframes pulseError {
      0%, 100% {
        transform: scale(1);
      }
      25% {
        transform: scale(1.05) translateX(-2px);
      }
      75% {
        transform: scale(1.05) translateX(2px);
      }
    }
  }

  video {
    max-width: 100%;
    height: auto;
    display: block;
  }

  > video {
    margin: 2rem 0;
    outline: 0.125rem solid transparent;
    border-radius: var(--tt-radius-xs, 0.25rem);
  }

  video.ProseMirror-selectednode {
    outline-color: var(--tt-brand-color-500);
  }

  // Thread video handling
  .tiptap-thread:has(> video) {
    margin: 2rem 0;

    video {
      outline: 0.125rem solid transparent;
      border-radius: var(--tt-radius-xs, 0.25rem);
    }
  }

  .tiptap-thread video {
    margin: 0;
  }

  // Ensure video nodes don't cause horizontal overflow
  .video-node-wrapper,
  .video-node {
    margin-left: 0;
    margin-right: 0;
  }
}
